# API Contract: Todo App Backend API

## Base URL
`/api`

## Authentication
All endpoints require JWT token in Authorization header:
`Authorization: Bearer <jwt_token>`

## Endpoints

### GET /tasks
**Description**: Retrieve all tasks for the authenticated user
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Response**:
- 200: Array of Task objects
- 401: Unauthorized (invalid/expired token)
- 403: Forbidden (attempt to access other user's tasks)

**Response Schema**:
```json
[
  {
    "id": 1,
    "title": "Sample task",
    "description": "Sample description",
    "completed": false,
    "created_at": "2023-01-01T00:00:00Z",
    "updated_at": "2023-01-01T00:00:00Z",
    "user_id": 1
  }
]
```

### POST /tasks
**Description**: Create a new task for the authenticated user
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Request Body**:
```json
{
  "title": "New task",
  "description": "Task description",
  "completed": false
}
```
**Response**:
- 201: Created Task object
- 400: Bad Request (invalid input)
- 401: Unauthorized
- 403: Forbidden

**Response Schema**:
```json
{
  "id": 1,
  "title": "New task",
  "description": "Task description",
  "completed": false,
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-01T00:00:00Z",
  "user_id": 1
}
```

### GET /tasks/{id}
**Description**: Retrieve a specific task for the authenticated user
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Path Parameters**:
- id: Task ID (integer)
**Response**:
- 200: Task object
- 401: Unauthorized
- 403: Forbidden (task belongs to another user)
- 404: Not Found (task doesn't exist)

### PUT /tasks/{id}
**Description**: Update a specific task for the authenticated user
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Path Parameters**:
- id: Task ID (integer)
**Request Body**:
```json
{
  "title": "Updated task",
  "description": "Updated description",
  "completed": true
}
```
**Response**:
- 200: Updated Task object
- 400: Bad Request
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found

### DELETE /tasks/{id}
**Description**: Delete a specific task for the authenticated user
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Path Parameters**:
- id: Task ID (integer)
**Response**:
- 204: No Content
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found

### PATCH /tasks/{id}/complete
**Description**: Toggle the completion status of a specific task
**Headers**:
- Authorization: Bearer `<jwt_token>`
**Path Parameters**:
- id: Task ID (integer)
**Response**:
- 200: Updated Task object with toggled completion status
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found